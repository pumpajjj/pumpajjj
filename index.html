<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>PUMPAJJJ!</title>
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="PUMPAJJJ!">
    <meta name="description" content="Pumpajjj i podrži studentske blokade!">
    <meta property="og:title" content="Pumpajjj i podrži studentske blokade!">
    <meta property="og:description" content="Pumpajjj i podrži studentske blokade!">
    <meta property="og:image" content="https://pumpajjj.github.io/pumpajjj/preview.png">
    <meta property="og:url" content="https://pumpajjj.github.io/pumpajjj">
    <meta name="twitter:card" content="summary_large_image">
    <style>
      html,
      body {
        --background-color: #63abbc;
        --background-color-end: #235b6c;
        --shadow-color: #55929f;
        display: flex;
        justify-content: flex-start;
        align-items: center;
        width: 100%;
        height: 100%;
      }

      body {
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: url("bg.png") repeat, linear-gradient(45deg, var(--background-color) 0%, var(--background-color-end) 100%);
        background-size: 200px 200px, 100% 100%;
        position: relative;
        max-width: 100vw;
        max-height: 100vh;
        overflow: hidden;
      }

      .progress-bar {
        background: linear-gradient(to right, var(--shadow-color) var(--progress), transparent 0);
        background-repeat: no-repeat;
        width: 100%;
        position: fixed;
        top: 0;
        left: 0;
        height: 4px;
        z-index: 1;
      }

      svg {
        box-sizing: border-box;
        width: 100%;
        height: 100%;
      }

      .balloon {
        user-select: none;
        filter: drop-shadow(25px 25px 25px rgba(0, 0, 0, 0.5))
      }

      #balloonsContainer {
        position: absolute;
        z-index: -1;
        visibility: hidden;
      }

      #pump-handle {
        cursor: pointer;
      }

      #pump-valve {
        cursor: pointer;
      }

      #pumpaj-image {
        position: absolute;
        right: 0;
        bottom: -400px;
        transition: all 1s;
        transform: scaleX(-1);
        width: 300px;
        height: 300px;
      }

      #pumpaj-image img {
        object-fit: contain;
        width: 100%;
        height: 100%;
      }

      #pumpaj-image.show {
        bottom: 0;
      }

      #footer {
        position: absolute;
        z-index: 1000;
        bottom: 0;
        width: 100%;
        background: rgba(35, 91, 108, 0.5);
        text-align: center;
      }

      #footer a {
        font: 16px sans-serif;
        color: white;
        text-decoration: none;
      }

      #support {
        position: absolute;
        bottom: 24px;
        left: 24px;
        display: block;
        width: 100px;
        height: 100px;
        animation: hithere 5s linear infinite;
      }
      #support:hover {
        animation: gelatine 5s;
      }

      #support img {
        width: 100%;
        height: 100%;
        filter: drop-shadow(5px 5px 5px rgba(0, 0, 0, 0.5))
      }

      /* on mobile, glue footer to the top */
      @media (max-width: 600px) {
        #footer {
          top: 0;
          bottom: auto;
        }
        #support {
            width: 80px;
            height: 80px;
            bottom: 160px;
        }
      }

      @keyframes gelatine {
        from, to { transform: scale(1, 1); }
        5% { transform: scale(0.9, 1.1); }
        10% { transform: scale(1.1, 0.9); }
        15% { transform: scale(0.95, 1.05); }
        15%,100% {
            transform: scale(1, 1);
        }
      }
    @keyframes hithere {
      6% { transform: scale(1.2); }
      8%, 12% { transform: rotate(-20deg) scale(1.2); }
      10% { transform: rotate(20deg) scale(1.2); }
      14% { transform: rotate(0deg) scale(1.2); }
      20%,100% { transform: scale(1); }
    }

    </style>
  </head>
  <body>
    <div id="progress" class="progress-bar"></div>
    <a id="support" href="https://blokadnedonacije.rs/">
      <img src="support-students.svg" />
    </a>
    <div id="balloonsContainer">
      <img id="brnaba" draggable="false" class="balloon" src="brnaba.png" data-anchor-x="0.6" data-anchor-y="0.98" />
      <img id="vucevic" draggable="false" class="balloon" src="vucic.png" data-anchor-x="0.6" data-anchor-y="0.98" />
      <img id="vucic" draggable="false" class="balloon" src="vucevic.png" data-anchor-x="0.5" data-anchor-y="0.98" />
    </div>
    <div id="pumpaj-image">
      <img src="pumpaj.png" />
    </div>
    <audio id="pump-sound" src="bicyclepump.mp3"></audio>
    <audio id="pop-sound" src="pop.mp3"></audio>
    <audio id="pumpaj-sound" src="pumpaj.mp3"></audio>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <svg width="100mm" height="200mm" viewBox="0 0 100 200" version="1.1" id="pump-svg" xml:space="preserve" inkscape:version="1.4 (1:1.4+202410161351+e7c3feb100)" sodipodi:docname="pumpaj.svg" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
      <sodipodi:namedview id="namedview1" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" inkscape:document-units="mm" showguides="true" inkscape:zoom="0.94558568" inkscape:cx="216.79685" inkscape:cy="274.96186" inkscape:window-width="1680" inkscape:window-height="981" inkscape:window-x="0" inkscape:window-y="32" inkscape:window-maximized="1" inkscape:current-layer="layer1">
        <sodipodi:guide position="16.578551,49.416577" orientation="1,0" id="guide1" inkscape:locked="false" />
        <sodipodi:guide position="27.422964,36.019307" orientation="1,0" id="guide2" inkscape:locked="false" />
        <sodipodi:guide position="40.831824,71.610546" orientation="0,-1" id="guide3" inkscape:locked="false" />
        <sodipodi:guide position="51.046363,77.609286" orientation="0,-1" id="guide4" inkscape:locked="false" />
        <sodipodi:guide position="15.578546,67.750666" orientation="-1,0" id="guide5" inkscape:locked="false" inkscape:label="" inkscape:color="rgb(0,134,229)" />
        <sodipodi:guide position="28.422964,67.068396" orientation="-1,0" id="guide6" inkscape:locked="false" inkscape:label="" inkscape:color="rgb(0,134,229)" />
        <sodipodi:guide position="45.239553,8.2018975" orientation="0,-1" id="guide7" inkscape:locked="false" />
        <sodipodi:guide position="51.281525,2.1587175" orientation="0,-1" id="guide8" inkscape:locked="false" />
        <sodipodi:guide position="43.011783,7.6717435e-06" orientation="0,-1" id="guide9" inkscape:locked="false" />
        <sodipodi:guide position="43.999955,-13.585432" orientation="-1,0" id="guide10" inkscape:locked="false" inkscape:label="" inkscape:color="rgb(0,134,229)" />
        <sodipodi:guide position="-3.1967156e-06,-4.9813022" orientation="1,0" id="guide11" inkscape:locked="false" />
        <sodipodi:guide position="22.000752,77.609296" orientation="1,0" id="guide31" inkscape:locked="false" />
        <sodipodi:guide position="20.000745,77.609286" orientation="-1,0" id="guide32" inkscape:locked="false" inkscape:label="" inkscape:color="rgb(0,134,229)" />
        <sodipodi:guide position="24.000745,76.585436" orientation="-1,0" id="guide33" inkscape:locked="false" inkscape:label="" inkscape:color="rgb(0,134,229)" />
        <sodipodi:guide position="24.000745,79.723466" orientation="0,-1" id="guide34" inkscape:locked="false" />
        <sodipodi:guide position="9.2812246,95.880356" orientation="0,-1" id="guide35" inkscape:locked="false" />
        <sodipodi:guide position="27.422965,103.68907" orientation="0,-1" id="guide36" inkscape:locked="false" />
        <sodipodi:guide position="18.043248,95.880366" orientation="1,0" id="guide37" inkscape:locked="false" />
        <sodipodi:guide position="26.009395,95.880366" orientation="1,0" id="guide38" inkscape:locked="false" />
        <sodipodi:guide position="2.3227737,97.434786" orientation="1,0" id="guide39" inkscape:locked="false" />
        <sodipodi:guide position="23.740035,88.562326" orientation="1,0" id="guide48" inkscape:locked="false" />
      </sodipodi:namedview>
      <defs id="defs1">
        <linearGradient id="linearGradient59" inkscape:collect="always">
          <stop style="stop-color:#282828;stop-opacity:1;" offset="0" id="stop59" />
          <stop style="stop-color:#adadad;stop-opacity:1;" offset="0.25" id="stop62" />
          <stop style="stop-color:#1a1a1a;stop-opacity:1;" offset="0.44448709" id="stop61" />
          <stop style="stop-color:#4d4d4d;stop-opacity:1;" offset="1" id="stop60" />
        </linearGradient>
        <linearGradient id="linearGradient48" inkscape:collect="always">
          <stop style="stop-color:#81a5ac;stop-opacity:1;" offset="0" id="stop48" />
          <stop style="stop-color:#e7e7e7;stop-opacity:1;" offset="0.12775865" id="stop55" />
          <stop style="stop-color:#dedede;stop-opacity:1;" offset="0.27100068" id="stop54" />
          <stop style="stop-color:#cccccc;stop-opacity:1;" offset="0.36308485" id="stop53" />
          <stop style="stop-color:#cccccc;stop-opacity:1;" offset="0.695611" id="stop52" />
          <stop style="stop-color:#d8dad9;stop-opacity:1;" offset="0.81327409" id="stop51" />
          <stop style="stop-color:#bacbce;stop-opacity:1;" offset="0.94116879" id="stop50" />
          <stop style="stop-color:#79a0a7;stop-opacity:1;" offset="1" id="stop49" />
        </linearGradient>
        <linearGradient id="linearGradient39" inkscape:collect="always">
          <stop style="stop-color:#111d22;stop-opacity:1;" offset="0" id="stop39" />
          <stop style="stop-color:#151c20;stop-opacity:1;" offset="0.06324071" id="stop47" />
          <stop style="stop-color:#383431;stop-opacity:1;" offset="0.13833955" id="stop46" />
          <stop style="stop-color:#343434;stop-opacity:1;" offset="0.28853723" id="stop45" />
          <stop style="stop-color:#1a1a1a;stop-opacity:1;" offset="0.38339892" id="stop44" />
          <stop style="stop-color:#1a1a1a;stop-opacity:1;" offset="0.72331995" id="stop43" />
          <stop style="stop-color:#262626;stop-opacity:1;" offset="0.76284564" id="stop42" />
          <stop style="stop-color:#1d1f1c;stop-opacity:1;" offset="0.91699588" id="stop41" />
          <stop style="stop-color:#0f1517;stop-opacity:1;" offset="1" id="stop40" />
        </linearGradient>
        <linearGradient id="linearGradient21" inkscape:collect="always">
          <stop style="stop-color:#c99b53;stop-opacity:1;" offset="0" id="stop22" />
          <stop style="stop-color:#e89732;stop-opacity:1;" offset="0.0295049" id="stop28" />
          <stop style="stop-color:#f9a239;stop-opacity:1;" offset="0.07972922" id="stop27" />
          <stop style="stop-color:#fea439;stop-opacity:1;" offset="0.26671433" id="stop26" />
          <stop style="stop-color:#ee7d07;stop-opacity:1;" offset="0.32140619" id="stop25" />
          <stop style="stop-color:#ed7f0a;stop-opacity:1;" offset="0.6954388" id="stop29" />
          <stop style="stop-color:#d29e4c;stop-opacity:1;" offset="0.95090312" id="stop24" />
          <stop style="stop-color:#8b8b66;stop-opacity:1;" offset="1" id="stop23" />
        </linearGradient>
        <linearGradient id="linearGradient11" inkscape:collect="always">
          <stop style="stop-color:#889ca2;stop-opacity:1;" offset="0" id="stop11" />
          <stop style="stop-color:#9da1a1;stop-opacity:1;" offset="0.05656355" id="stop19" />
          <stop style="stop-color:#b0b3b2;stop-opacity:1;" offset="0.07581849" id="stop18" />
          <stop style="stop-color:#c2c3c3;stop-opacity:1;" offset="0.11240286" id="stop17" />
          <stop style="stop-color:#b0b5b1;stop-opacity:1;" offset="0.34153658" id="stop16" />
          <stop style="stop-color:#91938e;stop-opacity:1;" offset="0.36464253" id="stop15" />
          <stop style="stop-color:#9a9998;stop-opacity:1;" offset="0.70160389" id="stop14" />
          <stop style="stop-color:#9f9d9b;stop-opacity:1;" offset="0.73048627" id="stop21" />
          <stop style="stop-color:#afaeaf;stop-opacity:1;" offset="0.89607877" id="stop20" />
          <stop style="stop-color:#9b9c9d;stop-opacity:1;" offset="0.91918468" id="stop13" />
          <stop style="stop-color:#767a84;stop-opacity:1;" offset="1" id="stop12" />
        </linearGradient>
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient11" id="linearGradient12" x1="93.155579" y1="110.82447" x2="106" y2="110.82447" gradientUnits="userSpaceOnUse" gradientTransform="matrix(1.1586437,0,0,1.1586437,4.2016192,10.739853)" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient21" id="linearGradient23" x1="94.155586" y1="124.10442" x2="105" y2="124.05496" gradientUnits="userSpaceOnUse" gradientTransform="matrix(1.1586437,0,0,1.1586437,4.2016192,10.739853)" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient11" id="linearGradient34" gradientUnits="userSpaceOnUse" x1="93.155579" y1="110.82447" x2="106" y2="110.82447" gradientTransform="matrix(1.1586437,0,0,1.1586437,9.3253746,8.2902735)" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient11" id="linearGradient35" gradientUnits="userSpaceOnUse" x1="93.155579" y1="110.82447" x2="106" y2="110.82447" gradientTransform="matrix(1.1586385,0,0,1.1586385,-48.930505,-245.76413)" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient39" id="linearGradient40" x1="93.155579" y1="81.516182" x2="93.155579" y2="87.773338" gradientUnits="userSpaceOnUse" gradientTransform="matrix(1.1586437,0,0,1.1586437,4.2016192,-34.650305)" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient39" id="linearGradient47" gradientUnits="userSpaceOnUse" x1="93.155579" y1="81.516182" x2="93.155579" y2="87.773338" gradientTransform="matrix(-1.1586437,0,0,1.1586437,235.01123,-34.531891)" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient48" id="linearGradient49" x1="97.898621" y1="96.998322" x2="101.31707" y2="96.998322" gradientUnits="userSpaceOnUse" gradientTransform="matrix(1.1586437,0,0,2.7686888,4.1667952,-187.52474)" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient48" id="linearGradient56" gradientUnits="userSpaceOnUse" gradientTransform="matrix(1.6951283,0,0,0.47808057,3.8938195,98.800973)" x1="97.898621" y1="96.998322" x2="101.31707" y2="96.998322" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient48" id="linearGradient57" gradientUnits="userSpaceOnUse" gradientTransform="matrix(1.1502611,0,0,0.12574196,35.143489,-190.46195)" x1="97.898621" y1="96.998322" x2="101.31707" y2="96.998322" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient59" id="linearGradient60" x1="96.026993" y1="146.96321" x2="103.14977" y2="146.76535" gradientUnits="userSpaceOnUse" gradientTransform="matrix(1.1586437,0,0,1.1586437,4.2016187,10.739852)" />
      </defs>
      <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-77.577034,-41.654987)">
        <path style="fill:none;fill-opacity:1;stroke:#22221e;stroke-width:2.3;stroke-dasharray:none;stroke-opacity:1;paint-order:fill markers stroke" d="m 129.02455,219.16195 c 11.11829,0 25.19756,-2.32674 24.18516,-11.69141 -1.0124,-9.36466 -13.91562,-1.72977 -15.63027,-10.65976 -1.71465,-8.92999 13.74888,-9.6546 11.84775,-18.9104" id="pump-hose" sodipodi:nodetypes="czzc" />
        <g id="pump-valve">
          <path style="fill:#000000;fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" d="m 154.77064,174.83357 c 0.45848,-0.0286 0.40116,0.57311 0.37251,0.97429 -0.0286,0.40119 -0.14328,6.7361 -0.14328,7.36445 0,0.62834 -0.88832,1.34679 -1.26083,-0.086 -0.37252,-1.43277 0.11459,-4.95739 -1.31815,-6.90595 -1.43277,-1.94857 2.34975,-1.34682 2.34975,-1.34682 z" id="path57" sodipodi:nodetypes="cszssc" />
          <rect style="fill:url(#linearGradient56);fill-opacity:1;stroke-width:0.343956;-inkscape-stroke:none;paint-order:fill markers stroke" id="rect48-3" width="5.7947111" height="12.225827" x="169.84453" y="142.93221" transform="matrix(0,1,1,0,0,0)" ry="0.88493383" />
          <rect style="fill:url(#linearGradient57);fill-opacity:1;stroke-width:0.343956;-inkscape-stroke:none;paint-order:fill markers stroke" id="pump-valve-connection" width="3.9321103" height="3.2155657" x="147.75247" y="-178.8548" transform="scale(1,-1)" ry="0" />
        </g>
        <g id="pump-handle">
          <rect style="fill:url(#linearGradient35);fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" id="rect35" width="9.0475082" height="9.2299232" x="59.003143" y="-124.22139" ry="0.7450372" transform="rotate(90)" rx="0" />
          <path style="fill:url(#linearGradient40);fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" d="m 114.99146,59.855213 -15.4963,-0.358194 c 0,0 -2.718132,-0.171933 -2.718132,2.177812 0,2.349743 0,1.533064 0,3.367009 0,1.833945 1.357,2.306759 2.087714,2.306759 0.730712,0 16.126718,-0.386848 16.126718,-0.386848 z" id="path39" />
          <path style="fill:url(#linearGradient47);fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" d="m 124.22138,59.973628 15.49631,-0.358195 c 0,0 2.71813,-0.171932 2.71813,2.177812 0,2.349744 0,1.533064 0,3.36701 0,1.833945 -1.357,2.306759 -2.08771,2.306759 -0.73072,0 -16.12673,-0.386848 -16.12673,-0.386848 z" id="path47" />
          <rect style="fill:url(#linearGradient49);fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" id="rect48" width="3.9607654" height="70.802948" x="117.59641" y="68.050659" />
        </g>
        <g id="pump-body">
          <rect style="fill:url(#linearGradient12);fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" id="rect11" width="14.882108" height="6.9504042" x="112.13574" y="134.61047" ry="0.74504048" />
          <rect style="fill:url(#linearGradient23);fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" id="rect21" width="12.564814" height="73.468033" x="113.2944" y="141.56088" ry="0" />
          <rect style="fill:#010204;fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" id="rect29" width="14.882108" height="8.2176409" x="112.13574" y="215.0289" ry="0.85102206" />
          <rect style="fill:#010204;fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" id="rect30" width="50.98027" height="2.5011694" x="94.085762" y="222.03081" ry="0.85102201" />
          <rect style="fill:#d0cdce;fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" id="pump-body-connection" width="3.9860525" height="3.6472311" x="127.01785" y="217.29506" ry="0" />
          <rect style="fill:url(#linearGradient34);fill-opacity:1;stroke-width:0.343958;-inkscape-stroke:none;paint-order:fill markers stroke" id="rect34" width="4.6345725" height="2.449585" x="117.2595" y="132.16089" ry="0" />
        </g>
        <path d="m 115.26705,201.75241 v -2.8408 q 0,-1.88304 1.48079,-1.88304 h 2.56429 q 1.46873,0 1.46873,1.86682 v 1.29864 h 3.13014 v 1.55838 z m 4.46644,-1.55838 v -0.99022 q 0,-0.61685 -0.50563,-0.61685 h -2.40779 q -0.50563,0 -0.50563,0.69801 v 0.90906 z m -4.46644,-9.46391 h 7.00664 q 1.63731,0 1.63731,1.88304 v 1.31488 q 0,1.86681 -1.64934,1.86681 h -6.99461 v -1.55838 h 7.03072 q 0.56584,0 0.56584,-0.68179 v -0.63309 q 0,-0.63309 -0.56584,-0.63309 h -7.03072 z m 5.08041,-4.62645 -5.08041,-1.44474 v -1.7207 h 8.64395 v 1.55837 l -5.65829,-0.16232 4.09322,1.16878 v 1.20124 l -4.09322,1.16879 5.65829,-0.16234 v 1.55839 h -8.64395 v -1.72072 z m -5.08041,-4.62642 v -2.8408 q 0,-1.88304 1.48079,-1.88304 h 2.56429 q 1.46873,0 1.46873,1.86682 v 1.29864 h 3.13014 v 1.55838 z m 4.46644,-1.55838 v -0.99021 q 0,-0.61686 -0.50563,-0.61686 h -2.40779 q -0.50563,0 -0.50563,0.69802 v 0.90905 z m 4.17751,-5.8764 v 1.55839 h -7.16316 q -1.48079,0 -1.48079,-1.86682 v -1.16878 q 0,-1.86681 1.48079,-1.86681 h 7.16316 v 1.55838 h -3.16625 v 1.78564 z m -4.21362,-1.78564 h -2.87731 q -0.50563,0 -0.50563,0.68179 v 0.42206 q 0,0.68179 0.50563,0.68179 h 2.87731 z m 3.16623,-2.37003 v -1.02269 q 0,-0.69802 -0.62603,-0.69802 h -6.97053 v -1.55838 h 7.18723 q 1.45672,0 1.45672,1.80188 v 1.47721 z m 0,-4.17191 v -1.02268 q 0,-0.69803 -0.62603,-0.69803 h -6.97053 v -1.55837 h 7.18723 q 1.45672,0 1.45672,1.80187 v 1.47721 z m 0,-4.17191 v -1.02269 q 0,-0.69801 -0.62603,-0.69801 h -6.97053 v -1.55839 h 7.18723 q 1.45672,0 1.45672,1.80187 v 1.47722 z m -7.59656,-6.46077 6.30839,0.19479 v 1.31488 l -6.30839,0.21104 z m 7.17519,0 h 1.46876 v 1.65578 h -1.46876 z" id="text59" style="font-weight:bold;font-size:15.6857px;font-family:BigNoodleTitling;-inkscape-font-specification:'BigNoodleTitling Bold';text-align:center;text-anchor:middle;opacity:0.266494;fill:url(#linearGradient60);fill-opacity:1;stroke-width:2.3;paint-order:fill markers stroke" aria-label="pumpajJJ!" />
      </g>
    </svg>
    <div id="footer">
      <a title="Podrži studente!" href="https://blokadnedonacije.rs/">Podrži studente!</a>
    </div>
    <script>
      let balloon;
      let TIME = 0;
      let DT = 0;
      const svg = document.getElementById("pump-svg");
      const pumpHandle = document.getElementById("pump-handle");
      const pumpValve = document.getElementById("pump-valve");
      const pumpHose = document.getElementById("pump-hose");
      const pumpBody = document.getElementById("pump-body");
      const pumpBodyConnection = document.getElementById("pump-body-connection");
      const pumpValveConnection = document.getElementById("pump-valve-connection");
      const balloonsContainer = document.getElementById("balloonsContainer");
      const popSound = document.getElementById("pop-sound");
      const pumpajSound = document.getElementById("pumpaj-sound");
      const pumpajImage = document.getElementById("pumpaj-image");
      const progress = document.getElementById("progress");
      const balloons = [];
      let pumpProgressTotal = 0;
      let totalBalloonsPumped = 0;
      let totalBalloonsPopped = 0;
      let lastPumpMilestone = 1;
      let isDraggingHandle = false;
      let isDraggingValve = false;
      let handleOffsetX = 0;
      let handleOffsetY = 0;
      let valveOffsetX = 0;
      let valveOffsetY = 0;
      let mouseDownX = 0;
      let mouseDownY = 0;
      // svg gets scaled to max-height
      // calculate how much it's scaled
      const scaleY = svg.clientHeight / svg.viewBox.baseVal.height;
      const scaleX = svg.clientWidth / svg.viewBox.baseVal.width;
      const scale = Math.min(scaleX, scaleY);
      const pumpRange = {
        min: 0,
        max: 50
      }; // Pump handle movement range
      function randomItem(items) {
        return items[Math.floor(Math.random() * items.length)];
      }

      function mapRange(value, inMin, inMax, outMin, outMax) {
        return ((value - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;
      }

      function clamp(value, min, max) {
        return Math.min(Math.max(value, min), max);
      }

      function translateElement(element, x, y) {
        element.setAttribute("transform", `translate(${x}, ${y})`);
      }

      function getElementTranslation(element) {
        const transform = element.getAttribute("transform");
        if (!transform) return {
          x: 0,
          y: 0
        };
        const match = transform.match(/translate\(([^,]+),([^,]+)\)/);
        if (!match) return {
          x: 0,
          y: 0
        };
        return {
          x: parseFloat(match[1]),
          y: parseFloat(match[2])
        };
      }
      async function getAudioBufferFromElement(ctx, audioElement) {
        // Step 1: Create an AudioContext
        const audioContext = ctx;
        // Step 2: Get the audio element's source
        const audioSource = audioElement.src;
        // Step 3: Fetch the audio file as ArrayBuffer
        const response = await fetch(audioSource);
        const arrayBuffer = await response.arrayBuffer();
        // Step 4: Decode the ArrayBuffer into an AudioBuffer
        const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
        // Now you have an AudioBuffer you can use for playback, processing, etc.
        console.log(audioBuffer);
        return audioBuffer;
      }
      class PositionalAudio {
        constructor() {
          this.audioContext = new(window.AudioContext || window.webkitAudioContext)();
          this.audioBuffer = null;
          this.sourceNode = null;
          this.isPlaying = false;
          this.lastMouseX = 0;
          this.lastMouseY = 0;
          this.lastTime = 0;
        }
        // Method to load audio data into the buffer
        async loadNode(node) {
          this.audioBuffer = await getAudioBufferFromElement(this.audioContext, node);
        }
        // Method to play sound based on position (0 to 1)
        play(position) {
          if (!this.audioBuffer || !this.audioContext) return;
          // Map position (0-1) to time in audioBuffer
          const time = position * this.audioBuffer.duration;
          if (this.isPlaying) {
            // Stop the currently playing sound if it is playing
            this.sourceNode.stop();
            this.isPlaying = false;
          }
          // Create a new source node for playback
          this.sourceNode = this.audioContext.createBufferSource();
          this.sourceNode.buffer = this.audioBuffer;
          this.sourceNode.connect(this.audioContext.destination);
          this.sourceNode.start(0, time); // Start from the mapped time position
          this.isPlaying = true;
          // Reset isPlaying flag once the sound ends
          this.sourceNode.onended = () => {
            this.isPlaying = false;
          };
        }
      }
      const pumpSound = new PositionalAudio();
      pumpSound.loadNode(document.getElementById('pump-sound'));
      class Events {
        constructor() {
          this.events = {};
        }
        on(name, callback) {
          if (!this.events[name]) {
            this.events[name] = [];
          }
          this.events[name].push(callback);
        }
        off(name, callback) {
          if (!this.events[name]) {
            return;
          }
          this.events[name] = this.events[name].filter(cb => cb !== callback);
        }
        trigger(name, ...data) {
          if (!this.events[name]) {
            return;
          }
          this.events[name].forEach(cb => cb(...data));
        }
      }
      const events = new Events();
      events.on("napumpan", () => {
        totalBalloonsPumped++;
        const p = ((totalBalloonsPumped - 1 - (lastPumpMilestone - 1) * 5) / 5) * 100;
        progress.style.setProperty('--progress', p + '%');
        if (totalBalloonsPumped > lastPumpMilestone * 5) {
          lastPumpMilestone += 1;
          pumpajSound.play();
          pumpajImage.classList.add("show");
          progress.style.setProperty('--progress', 0 + '%');
          setTimeout(() => {
            pumpajImage.classList.remove("show");
          }, 5000);
        }
        setTimeout(() => {
          instantiateBalloon();
        }, 1000);
      });
      events.on("popped", () => {
        totalBalloonsPopped++;
      });
      class Tween {
        constructor({
          duration,
          easing,
          onUpdate,
          onComplete
        }) {
          this.duration = duration;
          this.easing = easing;
          this.onUpdate = onUpdate;
          this.onComplete = onComplete;
          this.startTime = null;
          this.progress = 0;
          this.requestId = null;
        }
        start() {
          this.startTime = performance.now();
          this.update();
        }
        update() {
          const now = performance.now();
          this.progress = clamp((now - this.startTime) / this.duration, 0, 1);
          this.onUpdate(this.easing(this.progress));
          if (this.progress < 1) {
            this.requestId = requestAnimationFrame(() => this.update());
          } else {
            this.onComplete();
          }
        }
        stop() {
          cancelAnimationFrame(this.requestId);
        }
      }

      function tween(obj, prop, {
        from = obj[prop],
        to = 1,
        duration = 1000,
        easing = t => t,
        onUpdate = () => {},
        onComplete = () => {}
      }) {
        return new Promise((resolve) => {
          const tween = new Tween({
            duration,
            easing,
            onUpdate: (t) => {
              obj[prop] = mapRange(t, 0, 1, from, to);
              onUpdate(obj[prop], t);
            },
            onComplete: () => {
              obj[prop] = to;
              onComplete();
              resolve();
            }
          });
          tween.start();
        });
      }

      function instantiateBalloon() {
        const img = randomItem([...balloonsContainer.children]);
        balloon = new Balloon(img);
        balloons.push(balloon);
        const valveRect = pumpValve.getBoundingClientRect();
        balloon.translate((valveRect.x + 50), valveRect.y + 10);
        balloon.update();
      }
      class Balloon {
        constructor(imgElement) {
          this.imgElement = imgElement;
          this.balloon = imgElement.cloneNode();
          this.balloon.style.position = 'absolute';
          this.balloon.style.transition = 'transform 0.1s';
          // stretch the image to fill the balloon
          this.balloon.style.objectFit = 'cover';
          this.balloon.style.zIndex = 1000;
          this.balloon.addEventListener("pointerup", (e) => {
            if (this.isNapumpan) {
              this.pop();
              events.trigger("pop");
            }
          });
          this.size = scale / 6;
          this.rotation = 0;
          this.scaleX = 1;
          this.scaleY = 1;
          this.x = 0;
          this.y = 0;
          this.time = 0;
          this.driftDirection = Math.random() > 0.5 ? 1 : -1;
          this.pumpProgress = 0;
          this.isNapumpan = false;
          this.driftAmount = Math.random() * 2 + 0.5;
          this.floatSpeed = (Math.random() * 0.5 + 0.5) * 100;
          this.opacity = 1;
          const {
            anchorX,
            anchorY
          } = this.imgElement.dataset;
          this.balloon.style.transformOrigin = `${anchorX*100}% ${anchorY*100}%`;
          document.body.appendChild(this.balloon);
          this.update();
        }
        update() {
          if (!this.isNapumpan) {
            this.scale(0.1 + this.pumpProgress, 0.1 + this.pumpProgress);
            this.rotate(mapRange(this.pumpProgress, 0, 1, 145, 10));
            if (this.pumpProgress === 1) {
              this.isNapumpan = true;
              this.time = TIME;
              events.trigger("napumpan");
            } else {
              this.pumpProgress *= 0.98;
            }
          } else {
            this.y -= this.floatSpeed * DT;
            const t = (TIME - this.time) / 1000;
            const driftAmount = Math.sin(t) * this.driftAmount;
            this.x += this.driftDirection * driftAmount; // Add slight horizontal movement
            this.rotate(Math.sin(t / 3) * 30);
          }
          if (this.y < -200) {
            this.destroy();
          }
          const scaleX = (this.scaleX || 0) * this.size;
          const scaleY = (this.scaleY || 0) * this.size;
          const rotation = this.rotation;
          this.balloon.style.transform = `scale(${scaleX}, ${scaleY}) rotate(${rotation}deg)`;
          const {
            anchorX,
            anchorY
          } = this.imgElement.dataset;
          const {
            width,
            height
          } = this.imgElement.getBoundingClientRect();
          const x = this.x - anchorX * width;
          const y = this.y - anchorY * height;
          this.balloon.style.left = `${x}px`;
          this.balloon.style.top = `${y}px`;
          this.balloon.style.opacity = this.opacity;
        }
        rotate(deg) {
          this.rotation = deg;
        }
        translate(x, y) {
          this.x = x;
          this.y = y;
        }
        scale(x, y) {
          this.scaleX = x;
          this.scaleY = y || x;
        }
        pump(strength) {
          this.pumpProgress = clamp(this.pumpProgress + strength, 0, 1);
          pumpProgressTotal += strength;
        }
        pop() {
          popSound.play();
          tween(this, 'scaleX', {
            to: this.scaleX * 2,
            duration: 200,
            easing: t => 1 - t * t,
            onUpdate: (value, t) => {
              this.scale(value, value);
              this.opacity = t;
            },
            onComplete: () => {
              this.destroy();
            }
          });
        }
        destroy() {
          this.balloon.remove();
          balloons.splice(balloons.indexOf(this), 1);
        }
      }
      events.trigger("napumpan");

      function updateHose() {
        const bodyPos = getTransformedPosition(pumpBodyConnection);
        const valvePos = getTransformedPosition(pumpValveConnection);
        const distance = Math.sqrt((valvePos.x - bodyPos.x) ** 2 + (valvePos.y - bodyPos.y) ** 2);
        // Determine control points for the S shape
        const controlPoint1 = {
          x: bodyPos.x + distance / 2,
          y: bodyPos.y
        }; // Right of pump-body-connection
        const controlPoint2 = {
          x: valvePos.x,
          y: valvePos.y + distance / 2
        }; // Left of pump-valve-connection
        // Update the path: Move-to (M) followed by cubic Bézier (C)
        pumpHose.setAttribute('d', `M ${bodyPos.x},${bodyPos.y} C ${controlPoint1.x},${controlPoint1.y} ${controlPoint2.x},${controlPoint2.y} ${valvePos.x},${valvePos.y}`);
      }
      // Pump handle dragging
      pumpHandle.addEventListener("pointerdown", (e) => {
        isDraggingHandle = true;
      })

      svg.addEventListener("pointerdown", (e) => {
        mouseDownX = e.clientX;
        mouseDownY = e.clientY;
      });
      let oldY = 0;
      svg.addEventListener("pointermove", (e) => {
        if (isDraggingHandle) {
          const dragX = e.clientX - mouseDownX;
          const dragY = e.clientY - mouseDownY;
          const pumpProgress = clamp(mapRange(dragY, 0, (pumpRange.max - pumpRange.min) * scaleY, 0, 1), 0, 1);
          const newX = 0;
          const newY = mapRange(pumpProgress, 0, 1, pumpRange.min, pumpRange.max);
          if (newY > oldY) {
            pumpSound.play(pumpProgress);
            if (balloon) {
              balloon.pump(pumpProgress / 10);
            }
          }
          oldY = newY;
          translateElement(pumpHandle, newX, newY);
        }
        if (isDraggingValve) {
          // Move the valve (apply translation)
          const dx = event.movementX / scale;
          const dy = event.movementY / scale;
          const currentTransform = pumpValve.getAttribute('transform') || 'translate(0,0)';
          const [x, y] = currentTransform.match(/-?[0-9.]+/g).map(Number);
          translateElement(pumpValve, x + dx, y + dy);
          //updateHose();
        }
      });
      document.addEventListener("pointerup", () => {
        isDraggingHandle = false;
        isDraggingValve = false;
      });
      // Pump valve dragging
      //pumpValve.addEventListener("pointerdown", (e) => {
      //  return;
      //  isDraggingValve = true;
      //  const {
      //    x,
      //    y
      //  } = getElementTranslation(pumpValve);
      //  valveOffsetX = x;
      //  valveOffsetY = y;
      //});
      // Helper to get the global position of an element
      function getTransformedPosition(element) {
        const svgbox = svg.getBoundingClientRect();
        const bbox = element.getBoundingClientRect();
        return {
          x: (bbox.left + bbox.width / 2) / scale,
          y: (bbox.top + bbox.height / 2) / scale,
        };
      }
      // Initialize the hose position
      //updateHose();
      function loop(ts) {
        if (!TIME) {
          TIME = ts;
        }
        DT = (ts - TIME) / 1000;
        TIME = ts;
        balloons.forEach(balloon => {
          balloon.update();
        });
        requestAnimationFrame(loop);
      }
      loop();
    </script>
  </body>
</html>
